nohup: ignoring input
============================================================
üí≥ MARKETPLACE CLIENT AGENT
============================================================

üöÄ Starting Marketplace Client Agent...
   - Requests services from tool agents
   - Verifies task completion independently
   - Handles FET token payments

üìã Compatible with hackathon requirements:
   - Registered on Agentverse (with publish_manifest=True)
   - Chat protocol enabled for ASI:One integration
   - Trust-minimized verification system

üéØ Agent will be discoverable at: http://127.0.0.1:8002

üí° To use this agent:
   1. Make sure the tool agent is running first
   2. Copy the tool agent's address from its startup logs
   3. Either update KNOWN_TOOL_AGENT in the code or use chat commands

üó®Ô∏è  Chat commands you can try:
   - 'create issue: Your Title Here'
   - 'status' (check latest job status)
   - 'balance' (check FET balance)

Starting agent... (Press Ctrl+C to stop)
Agent address will be displayed below:
------------------------------------------------------------
INFO:     [marketplace_client]: Starting agent with address: agent1qgpc60trhz6unzzgtjykw8nwtfzak780r3pu96kl73ffcnv5kfdtsvtf906
INFO:client.marketplace_client_agent:Client agent agent1qgpc60trhz6unzzgtjykw8nwtfzak780r3pu96kl73ffcnv5kfdtsvtf906 started successfully
INFO:utils.payment:Current balance for fetch12lu666eteehhes8aht8v7aamxsrk3vjd25kmfl: 8997225730000000000 atestfet
INFO:utils.payment:Current balance for fetch12lu666eteehhes8aht8v7aamxsrk3vjd25kmfl: 8997225730000000000 atestfet
INFO:     [marketplace_client]: Agent inspector available at https://agentverse.ai/inspect/?uri=http%3A//127.0.0.1%3A8002&address=agent1qgpc60trhz6unzzgtjykw8nwtfzak780r3pu96kl73ffcnv5kfdtsvtf906
INFO:     [marketplace_client]: Starting server on http://0.0.0.0:8002 (Press CTRL+C to quit)
INFO:httpx:HTTP Request: POST http://127.0.0.1:8000/agent-event "HTTP/1.1 200 OK"
INFO:     [marketplace_client]: Client agent initialization complete
INFO:     [marketplace_client]: Manifest published successfully: AgentChatProtocol
INFO:     [uagents.registration]: Registration on Almanac API successful
INFO:     [uagents.registration]: Almanac contract registration is up to date!
INFO:aiohttp.access:127.0.0.1 [28/Sep/2025:00:24:18 -0500] "POST /ask HTTP/1.1" 200 172 "-" "python-httpx/0.28.1"
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/agents?task=create_github_issue "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET http://127.0.0.1:8001/ "HTTP/1.1 404 Not Found"
INFO:httpx:HTTP Request: GET http://127.0.0.1:8004/ "HTTP/1.1 404 Not Found"
INFO:     [marketplace_client]: Sent quote request to agent1qfydudacecdkj47ac0wt4587a5w25pssllam7s4zdnaylxvtfvguwq4tfpt for GitHub issue: create a github issue titled "test 4" with issue body "test"
INFO:     [marketplace_client]: Received quote from agent1qfydudacecdkj47ac0wt4587a5w25pssllam7s4zdnaylxvtfvguwq4tfpt: job_e01a4620d6ea599e - 500000000000000000 atestfet
INFO:httpx:HTTP Request: POST http://127.0.0.1:8000/agent-event "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://127.0.0.1:8000/agent-event "HTTP/1.1 200 OK"
INFO:utils.state_manager:Created job record: job_e01a4620d6ea599e
INFO:utils.payment:Current balance for fetch12lu666eteehhes8aht8v7aamxsrk3vjd25kmfl: 8997225730000000000 atestfet
INFO:     [marketplace_client]: Accepting quote job_e01a4620d6ea599e from agent1qfydudacecdkj47ac0wt4587a5w25pssllam7s4zdnaylxvtfvguwq4tfpt
INFO:utils.state_manager:Updated job job_e01a4620d6ea599e with 4 fields
INFO:httpx:HTTP Request: POST http://127.0.0.1:8000/agent-event "HTTP/1.1 200 OK"
INFO:     [marketplace_client]: Sent perform request for job job_e01a4620d6ea599e
INFO:     [marketplace_client]: Received receipt from agent1qfydudacecdkj47ac0wt4587a5w25pssllam7s4zdnaylxvtfvguwq4tfpt for job job_e01a4620d6ea599e
INFO:utils.state_manager:Updated job job_e01a4620d6ea599e with 4 fields
INFO:httpx:HTTP Request: POST http://127.0.0.1:8000/agent-event "HTTP/1.1 200 OK"
INFO:     [marketplace_client]: Verifying and processing payment for job job_e01a4620d6ea599e
INFO:utils.verifier:Verifying task completion for job job_e01a4620d6ea599e
INFO:utils.github_api:Original issue_url: https://api.github.com/repos/FrankWithYou/mhacks25-marketplace-test/issues/25
INFO:utils.github_api:Using API URL as-is: https://api.github.com/repos/FrankWithYou/mhacks25-marketplace-test/issues/25
INFO:utils.github_api:Making verification request to: https://api.github.com/repos/FrankWithYou/mhacks25-marketplace-test/issues/25
INFO:httpx:HTTP Request: GET https://api.github.com/repos/FrankWithYou/mhacks25-marketplace-test/issues/25 "HTTP/1.1 200 OK"
INFO:utils.github_api:Response status: 200
INFO:utils.state_manager:Updated job job_e01a4620d6ea599e with 3 fields
INFO:     [marketplace_client]: Verification passed for job job_e01a4620d6ea599e
INFO:httpx:HTTP Request: POST http://127.0.0.1:8000/agent-event "HTTP/1.1 200 OK"
INFO:utils.payment:Current balance for fetch12lu666eteehhes8aht8v7aamxsrk3vjd25kmfl: 8997225730000000000 atestfet
ERROR:utils.payment:Payment error: LedgerClient.send_tokens() got an unexpected keyword argument 'wallet'
INFO:utils.state_manager:Updated job job_e01a4620d6ea599e with 3 fields
INFO:httpx:HTTP Request: POST http://127.0.0.1:8000/agent-event "HTTP/1.1 200 OK"
INFO:     [marketplace_client]: Payment simulated for job job_e01a4620d6ea599e: demo_tx_job_e01a_1759037071
INFO:aiohttp.access:127.0.0.1 [28/Sep/2025:00:26:34 -0500] "POST /ask HTTP/1.1" 200 172 "-" "python-httpx/0.28.1"
INFO:httpx:HTTP Request: POST https://api.asi1.ai/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET http://127.0.0.1:8000/agents?task=create_github_issue "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: GET http://127.0.0.1:8001/ "HTTP/1.1 404 Not Found"
INFO:httpx:HTTP Request: GET http://127.0.0.1:8004/ "HTTP/1.1 404 Not Found"
INFO:     [marketplace_client]: Sent quote request to agent1qfydudacecdkj47ac0wt4587a5w25pssllam7s4zdnaylxvtfvguwq4tfpt for GitHub issue: Create a GitHub issue with the issue title of "Test". The issue body should be "Test 2".
INFO:     [marketplace_client]: Received quote from agent1qfydudacecdkj47ac0wt4587a5w25pssllam7s4zdnaylxvtfvguwq4tfpt: job_8a02ef1f7bf8dec0 - 500000000000000000 atestfet
INFO:httpx:HTTP Request: POST http://127.0.0.1:8000/agent-event "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST http://127.0.0.1:8000/agent-event "HTTP/1.1 200 OK"
INFO:utils.state_manager:Created job record: job_8a02ef1f7bf8dec0
INFO:utils.payment:Current balance for fetch12lu666eteehhes8aht8v7aamxsrk3vjd25kmfl: 8997225730000000000 atestfet
INFO:     [marketplace_client]: Accepting quote job_8a02ef1f7bf8dec0 from agent1qfydudacecdkj47ac0wt4587a5w25pssllam7s4zdnaylxvtfvguwq4tfpt
INFO:utils.state_manager:Updated job job_8a02ef1f7bf8dec0 with 4 fields
INFO:httpx:HTTP Request: POST http://127.0.0.1:8000/agent-event "HTTP/1.1 200 OK"
INFO:     [marketplace_client]: Sent perform request for job job_8a02ef1f7bf8dec0
INFO:     [marketplace_client]: Received receipt from agent1qfydudacecdkj47ac0wt4587a5w25pssllam7s4zdnaylxvtfvguwq4tfpt for job job_8a02ef1f7bf8dec0
INFO:utils.state_manager:Updated job job_8a02ef1f7bf8dec0 with 4 fields
INFO:httpx:HTTP Request: POST http://127.0.0.1:8000/agent-event "HTTP/1.1 200 OK"
INFO:     [marketplace_client]: Verifying and processing payment for job job_8a02ef1f7bf8dec0
INFO:utils.verifier:Verifying task completion for job job_8a02ef1f7bf8dec0
INFO:utils.github_api:Original issue_url: https://api.github.com/repos/FrankWithYou/mhacks25-marketplace-test/issues/26
INFO:utils.github_api:Using API URL as-is: https://api.github.com/repos/FrankWithYou/mhacks25-marketplace-test/issues/26
INFO:utils.github_api:Making verification request to: https://api.github.com/repos/FrankWithYou/mhacks25-marketplace-test/issues/26
INFO:httpx:HTTP Request: GET https://api.github.com/repos/FrankWithYou/mhacks25-marketplace-test/issues/26 "HTTP/1.1 200 OK"
INFO:utils.github_api:Response status: 200
INFO:utils.state_manager:Updated job job_8a02ef1f7bf8dec0 with 3 fields
INFO:     [marketplace_client]: Verification passed for job job_8a02ef1f7bf8dec0
INFO:httpx:HTTP Request: POST http://127.0.0.1:8000/agent-event "HTTP/1.1 200 OK"
INFO:utils.payment:Current balance for fetch12lu666eteehhes8aht8v7aamxsrk3vjd25kmfl: 8997225730000000000 atestfet
ERROR:utils.payment:Payment error: LedgerClient.send_tokens() got an unexpected keyword argument 'wallet'
INFO:utils.state_manager:Updated job job_8a02ef1f7bf8dec0 with 3 fields
INFO:httpx:HTTP Request: POST http://127.0.0.1:8000/agent-event "HTTP/1.1 200 OK"
INFO:     [marketplace_client]: Payment simulated for job job_8a02ef1f7bf8dec0: demo_tx_job_8a02_1759037200
